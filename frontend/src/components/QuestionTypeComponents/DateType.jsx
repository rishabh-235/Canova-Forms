import { useState } from "react";
import { useSelector, useDispatch } from "react-redux";
import { useParams } from "react-router-dom";
import {
  addCondition,
  removeCondition,
} from "../../redux/slices/state/formstateslice";
function DateType({ questionId }) {
  const [selectedDate, setSelectedDate] = useState("");
  const [selectedCondition, setSelectedCondition] = useState(null);
  const { isConditionActive } = useSelector((state) => state.form);
  const { pageNo } = useParams();
  const dispatch = useDispatch();
  const currentPageNumber = parseInt(pageNo) || 1;
  const handleDateChange = (e) => {
    if (!isConditionActive) return;
    const newDate = e.target.value;
    setSelectedDate(newDate);
    if (questionId) {
      if (selectedCondition !== null) {
        dispatch(
          removeCondition({
            pageNumber: currentPageNumber,
            questionId: questionId,
            conditionText: selectedCondition,
          })
        );
      }
      dispatch(
        addCondition({
          pageNumber: currentPageNumber,
          questionId: questionId,
          conditionText: newDate,
        })
      );
      setSelectedCondition(newDate);
    }
  };
  return (
    <div className="date-type-container">
      <label htmlFor="date-input">
        <svg
          width="22"
          height="22"
          viewBox="0 0 26 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.4536 12.3905C10.5058 12.4138 10.5622 12.4258 10.6193 12.4258C10.6767 12.4259 10.7333 12.4137 10.7855 12.3901C11.0179 12.2817 11.2399 12.1521 11.4485 12.0029C11.6593 11.8839 11.8383 11.7159 11.9705 11.5131C12.1026 11.3103 12.184 11.0787 12.2078 10.8378V9.21278C12.2079 9.15732 12.1966 9.10242 12.1747 9.05148C12.1528 9.00053 12.1207 8.95461 12.0803 8.91655C12.04 8.87849 11.9923 8.84909 11.9401 8.83017C11.888 8.81125 11.8325 8.80321 11.7772 8.80653C11.739 8.80653 11.6996 8.80978 11.6598 8.80978C11.3869 8.82615 11.1161 8.75375 10.8879 8.60341C10.8136 8.53772 10.7179 8.50146 10.6187 8.50146C10.5196 8.50146 10.4239 8.53772 10.3496 8.60341C10.1214 8.75386 9.85056 8.82627 9.57772 8.80978C9.5371 8.80978 9.49891 8.80978 9.46072 8.80653C9.40544 8.80362 9.35014 8.81183 9.29808 8.83067C9.24602 8.84951 9.19828 8.8786 9.15766 8.91622C9.11736 8.95422 9.08526 9.00005 9.06332 9.05091C9.04138 9.10177 9.03008 9.15658 9.0301 9.21197V10.837C9.03213 11.7116 10.2159 12.2857 10.4536 12.3905ZM9.84422 9.60969C10.114 9.58669 10.377 9.51338 10.6198 9.39356C10.8624 9.51332 11.1253 9.58663 11.3949 9.60969V10.8378C11.3949 10.9349 11.2836 11.1189 10.972 11.3444C10.8583 11.4254 10.7397 11.4993 10.6169 11.5658C10.2237 11.3549 9.84504 11.0377 9.84504 10.8378L9.84422 9.60969ZM21.5215 17.8448C21.4809 17.8448 21.4402 17.8488 21.3996 17.8488C21.1266 17.8654 20.8557 17.7927 20.6277 17.6417C20.5534 17.5759 20.4576 17.5395 20.3584 17.5395C20.2591 17.5395 20.1633 17.5759 20.089 17.6417C19.8609 17.7922 19.59 17.8647 19.3172 17.8484C19.2765 17.8484 19.2359 17.8464 19.1953 17.8444C19.1403 17.8418 19.0853 17.8504 19.0337 17.8695C18.982 17.8886 18.9347 17.9179 18.8947 17.9557C18.8547 17.9937 18.8229 18.0393 18.8012 18.09C18.7795 18.1406 18.7683 18.1951 18.7683 18.2502V19.8752C18.7683 20.747 19.9525 21.3215 20.1902 21.4279C20.2425 21.4513 20.2991 21.4633 20.3563 21.4633C20.4136 21.4633 20.4703 21.4511 20.5225 21.4275C20.7548 21.3189 20.9766 21.1892 21.1851 21.0399C21.396 20.9211 21.5751 20.7532 21.7072 20.5505C21.8394 20.3477 21.9208 20.1161 21.9444 19.8752V18.2502C21.9445 18.1951 21.9333 18.1405 21.9116 18.0898C21.8899 18.0391 21.8581 17.9934 21.8182 17.9554C21.7782 17.9174 21.731 17.8879 21.6792 17.8687C21.6275 17.8496 21.5725 17.8412 21.5174 17.844L21.5215 17.8448ZM21.1359 19.876C21.1359 19.9731 21.025 20.1572 20.713 20.3826C20.5996 20.4637 20.4811 20.5375 20.3584 20.6036C19.9928 20.4062 19.5865 20.0844 19.5865 19.876V18.6467C19.8564 18.6235 20.1196 18.5501 20.3624 18.4302C20.6049 18.5501 20.8677 18.6235 21.1372 18.6467L21.1359 19.876ZM16.0505 8.64769H14.7001C14.3972 8.64801 14.1067 8.76853 13.8926 8.98278C13.6784 9.19704 13.558 9.48752 13.5578 9.79047V11.1413C13.5581 11.4441 13.6785 11.7345 13.8927 11.9487C14.1069 12.1628 14.3973 12.2833 14.7001 12.2836H16.0505C16.3535 12.2834 16.6439 12.163 16.8582 11.9488C17.0724 11.7346 17.193 11.4442 17.1933 11.1413V9.79047C17.193 9.48749 17.0725 9.197 16.8582 8.98276C16.644 8.76852 16.3535 8.64801 16.0505 8.64769ZM16.3808 11.1408C16.3807 11.2284 16.3458 11.3123 16.2839 11.3741C16.222 11.436 16.138 11.4707 16.0505 11.4707H14.7001C14.6127 11.4706 14.5288 11.4358 14.467 11.374C14.4052 11.3121 14.3704 11.2283 14.3703 11.1408V9.79047C14.3704 9.70302 14.4052 9.61917 14.467 9.55733C14.5288 9.49549 14.6127 9.4607 14.7001 9.4606H16.0505C16.138 9.4606 16.222 9.49534 16.2839 9.55719C16.3458 9.61904 16.3807 9.70295 16.3808 9.79047V11.1408ZM21.036 8.64769H19.6852C19.3823 8.64801 19.0918 8.76853 18.8777 8.98278C18.6635 9.19704 18.5431 9.48752 18.5428 9.79047V11.1413C18.5432 11.4441 18.6636 11.7345 18.8778 11.9487C19.092 12.1628 19.3823 12.2833 19.6852 12.2836H21.036C21.3389 12.2833 21.6293 12.1628 21.8434 11.9487C22.0576 11.7345 22.1781 11.4441 22.1784 11.1413V9.79047C22.1782 9.48752 22.0578 9.19704 21.8436 8.98278C21.6294 8.76853 21.339 8.64801 21.036 8.64769ZM21.3659 11.1408C21.3658 11.2283 21.331 11.3121 21.2691 11.374C21.2073 11.4358 21.1235 11.4706 21.036 11.4707H19.6852C19.5978 11.4706 19.5139 11.4358 19.4521 11.374C19.3902 11.3121 19.3555 11.2283 19.3553 11.1408V9.79047C19.3555 9.70302 19.3902 9.61917 19.4521 9.55733C19.5139 9.49549 19.5978 9.4607 19.6852 9.4606H21.036C21.1235 9.4607 21.2073 9.49549 21.2691 9.55733C21.331 9.61917 21.3658 9.70302 21.3659 9.79047V11.1408ZM16.0505 13.1498H14.7001C14.3972 13.1501 14.1067 13.2706 13.8926 13.4848C13.6784 13.6991 13.558 13.9896 13.5578 14.2925V15.6433C13.5581 15.9462 13.6786 16.2365 13.8927 16.4506C14.1069 16.6647 14.3973 16.7851 14.7001 16.7853H16.0505C16.3534 16.7851 16.6438 16.6647 16.858 16.4506C17.0723 16.2365 17.1929 15.9462 17.1933 15.6433V14.2925C17.193 13.9895 17.0725 13.6991 16.8582 13.4848C16.644 13.2706 16.3535 13.1501 16.0505 13.1498ZM16.3808 15.6433C16.3806 15.7308 16.3457 15.8146 16.2838 15.8763C16.2218 15.9381 16.138 15.9728 16.0505 15.9728H14.7001C14.6127 15.9728 14.5289 15.9381 14.467 15.8763C14.4052 15.8145 14.3704 15.7307 14.3703 15.6433V14.2925C14.3703 14.205 14.405 14.1211 14.4668 14.0591C14.5287 13.9972 14.6126 13.9624 14.7001 13.9623H16.0505C16.1381 13.9623 16.2221 13.997 16.284 14.059C16.346 14.1209 16.3808 14.2049 16.3808 14.2925V15.6433ZM11.2937 13.1498H9.94457C9.64162 13.1501 9.35118 13.2706 9.137 13.4848C8.92282 13.6991 8.80241 13.9896 8.80219 14.2925V15.6433C8.80252 15.9462 8.92299 16.2365 9.13717 16.4506C9.35135 16.6647 9.64173 16.7851 9.94457 16.7853H11.2937C11.5965 16.785 11.8869 16.6646 12.101 16.4505C12.3152 16.2364 12.4357 15.9461 12.4361 15.6433V14.2925C12.4358 13.9896 12.3153 13.6992 12.1012 13.485C11.887 13.2707 11.5966 13.1502 11.2937 13.1498ZM11.6236 15.6433C11.6234 15.7307 11.5885 15.8144 11.5267 15.8762C11.4649 15.9379 11.3811 15.9727 11.2937 15.9728H9.94457C9.85715 15.9728 9.77331 15.9381 9.71145 15.8763C9.6496 15.8145 9.6148 15.7307 9.61469 15.6433V14.2925C9.61469 14.205 9.64943 14.1211 9.71129 14.0591C9.77314 13.9972 9.85704 13.9624 9.94457 13.9623H11.2937C11.3812 13.9624 11.4652 13.9972 11.527 14.0591C11.5889 14.1211 11.6236 14.205 11.6236 14.2925V15.6433ZM6.5406 13.1498H5.18901C4.88606 13.1501 4.59562 13.2706 4.38144 13.4848C4.16726 13.6991 4.04685 13.9896 4.04663 14.2925V15.6433C4.04695 15.9462 4.16743 16.2365 4.38161 16.4506C4.59578 16.6647 4.88617 16.7851 5.18901 16.7853H6.5406C6.84344 16.7851 7.13382 16.6647 7.348 16.4506C7.56218 16.2365 7.68265 15.9462 7.68297 15.6433V14.2925C7.68276 13.9896 7.56235 13.6991 7.34817 13.4848C7.13399 13.2706 6.84355 13.1501 6.5406 13.1498ZM6.87047 15.6433C6.87037 15.7307 6.83556 15.8145 6.77371 15.8763C6.71186 15.9381 6.62802 15.9728 6.5406 15.9728H5.18901C5.10159 15.9728 5.01774 15.9381 4.95589 15.8763C4.89404 15.8145 4.85924 15.7307 4.85913 15.6433V14.2925C4.85913 14.205 4.89387 14.1211 4.95572 14.0591C5.01758 13.9972 5.10148 13.9624 5.18901 13.9623H6.5406C6.62813 13.9624 6.71203 13.9972 6.77388 14.0591C6.83573 14.1211 6.87047 14.205 6.87047 14.2925V15.6433ZM21.036 13.1498H19.6852C19.3823 13.1501 19.0918 13.2706 18.8777 13.4848C18.6635 13.6991 18.5431 13.9896 18.5428 14.2925V15.6433C18.5432 15.9462 18.6636 16.2365 18.8778 16.4506C19.092 16.6647 19.3824 16.7851 19.6852 16.7853H21.036C21.3388 16.7851 21.6292 16.6647 21.8434 16.4506C22.0576 16.2365 22.1781 15.9462 22.1784 15.6433V14.2925C22.1782 13.9896 22.0578 13.6991 21.8436 13.4848C21.6294 13.2706 21.339 13.1501 21.036 13.1498ZM21.3659 15.6433C21.3658 15.7307 21.331 15.8145 21.2691 15.8763C21.2073 15.9381 21.1234 15.9728 21.036 15.9728H19.6852C19.5978 15.9728 19.514 15.9381 19.4521 15.8763C19.3903 15.8145 19.3555 15.7307 19.3553 15.6433V14.2925C19.3553 14.205 19.3901 14.1211 19.4519 14.0591C19.5138 13.9972 19.5977 13.9624 19.6852 13.9623H21.036C21.1235 13.9624 21.2074 13.9972 21.2693 14.0591C21.3311 14.1211 21.3659 14.205 21.3659 14.2925V15.6433ZM16.0505 17.6839H14.7001C14.3972 17.6842 14.1067 17.8047 13.8926 18.019C13.6784 18.2333 13.558 18.5237 13.5578 18.8267V20.1775C13.5581 20.4803 13.6786 20.7706 13.8927 20.9848C14.1069 21.1989 14.3973 21.3192 14.7001 21.3194H16.0505C16.3534 21.3192 16.6438 21.1989 16.858 20.9848C17.0723 20.7707 17.1929 20.4803 17.1933 20.1775V18.8267C17.193 18.5237 17.0725 18.2332 16.8582 18.019C16.644 17.8047 16.3535 17.6842 16.0505 17.6839ZM16.3808 20.1775C16.3806 20.2649 16.3457 20.3487 16.2838 20.4105C16.2218 20.4723 16.138 20.5069 16.0505 20.5069H14.7001C14.6127 20.5069 14.5289 20.4722 14.467 20.4105C14.4052 20.3487 14.3704 20.2649 14.3703 20.1775V18.8267C14.3703 18.7392 14.405 18.6552 14.4668 18.5933C14.5287 18.5314 14.6126 18.4965 14.7001 18.4964H16.0505C16.1381 18.4965 16.222 18.5313 16.2839 18.5933C16.3458 18.6552 16.3807 18.7391 16.3808 18.8267V20.1775ZM11.2937 17.6839H9.94457C9.64162 17.6842 9.35118 17.8047 9.137 18.019C8.92282 18.2333 8.80241 18.5237 8.80219 18.8267V20.1775C8.80252 20.4803 8.92299 20.7706 9.13717 20.9848C9.35135 21.1989 9.64173 21.3192 9.94457 21.3194H11.2937C11.5965 21.3191 11.8869 21.1987 12.101 20.9846C12.3152 20.7706 12.4357 20.4803 12.4361 20.1775V18.8267C12.4358 18.5238 12.3153 18.2334 12.1012 18.0191C11.887 17.8049 11.5966 17.6843 11.2937 17.6839ZM11.6236 20.1775C11.6234 20.2649 11.5885 20.3486 11.5267 20.4103C11.4649 20.4721 11.3811 20.5068 11.2937 20.5069H9.94457C9.85715 20.5069 9.77331 20.4722 9.71145 20.4105C9.6496 20.3487 9.6148 20.2649 9.61469 20.1775V18.8267C9.61469 18.7392 9.64943 18.6552 9.71129 18.5933C9.77314 18.5314 9.85704 18.4965 9.94457 18.4964H11.2937C11.3812 18.4966 11.4651 18.5315 11.5269 18.5934C11.5887 18.6553 11.6235 18.7392 11.6236 18.8267V20.1775ZM6.5406 17.6839H5.18901C4.88606 17.6842 4.59562 17.8047 4.38144 18.019C4.16726 18.2333 4.04685 18.5237 4.04663 18.8267V20.1775C4.04695 20.4803 4.16743 20.7706 4.38161 20.9848C4.59578 21.1989 4.88617 21.3192 5.18901 21.3194H6.5406C6.84344 21.3192 7.13382 21.1989 7.348 20.9848C7.56218 20.7706 7.68265 20.4803 7.68297 20.1775V18.8267C7.68276 18.5237 7.56235 18.2333 7.34817 18.019C7.13399 17.8047 6.84355 17.6842 6.5406 17.6839ZM6.87047 20.1775C6.87037 20.2649 6.83556 20.3487 6.77371 20.4105C6.71186 20.4722 6.62802 20.5069 6.5406 20.5069H5.18901C5.10159 20.5069 5.01774 20.4722 4.95589 20.4105C4.89404 20.3487 4.85924 20.2649 4.85913 20.1775V18.8267C4.85913 18.7392 4.89387 18.6552 4.95572 18.5933C5.01758 18.5314 5.10148 18.4965 5.18901 18.4964H6.5406C6.62813 18.4965 6.71203 18.5314 6.77388 18.5933C6.83573 18.6552 6.87047 18.7392 6.87047 18.8267V20.1775Z"
            fill="black"
          />
          <path
            d="M24.0906 7.1015V4.07859C24.0909 3.86155 24.0051 3.65325 23.852 3.4994C23.699 3.34555 23.4911 3.25872 23.274 3.25797H19.3537V2.18141C19.3537 1.88726 19.2369 1.60517 19.0289 1.39718C18.8209 1.18919 18.5388 1.07234 18.2447 1.07234C17.9505 1.07234 17.6684 1.18919 17.4604 1.39718C17.2525 1.60517 17.1356 1.88726 17.1356 2.18141V3.25797H9.22186V2.18141C9.22186 1.88673 9.10479 1.60411 8.89642 1.39574C8.68805 1.18737 8.40544 1.07031 8.11076 1.07031C7.81608 1.07031 7.53347 1.18737 7.3251 1.39574C7.11673 1.60411 6.99967 1.88673 6.99967 2.18141V3.25797H3.04279C2.82522 3.25818 2.61661 3.34471 2.46276 3.49856C2.30891 3.65241 2.22238 3.86102 2.22217 4.07859V22.6523C2.22292 22.8694 2.30975 23.0773 2.4636 23.2303C2.61745 23.3834 2.82575 23.4692 3.04279 23.4689H23.274C23.4905 23.4686 23.698 23.3825 23.8511 23.2294C24.0041 23.0763 24.0903 22.8688 24.0906 22.6523V7.1015ZM17.9481 2.18141C17.9481 2.10275 17.9793 2.02732 18.035 1.9717C18.0906 1.91609 18.166 1.88484 18.2447 1.88484C18.3233 1.88484 18.3988 1.91609 18.4544 1.9717C18.51 2.02732 18.5412 2.10275 18.5412 2.18141V4.87484C18.5412 4.9535 18.51 5.02893 18.4544 5.08455C18.3988 5.14016 18.3233 5.17141 18.2447 5.17141C18.166 5.17141 18.0906 5.14016 18.035 5.08455C17.9793 5.02893 17.9481 4.9535 17.9481 4.87484V2.18141ZM7.81217 2.18141C7.81217 2.10221 7.84363 2.02627 7.89962 1.97027C7.95562 1.91427 8.03157 1.88281 8.11076 1.88281C8.18995 1.88281 8.2659 1.91427 8.3219 1.97027C8.3779 2.02627 8.40936 2.10221 8.40936 2.18141V4.87484C8.40936 4.95404 8.3779 5.02998 8.3219 5.08598C8.2659 5.14198 8.18995 5.17344 8.11076 5.17344C8.03157 5.17344 7.95562 5.14198 7.89962 5.08598C7.84363 5.02998 7.81217 4.95404 7.81217 4.87484V2.18141ZM6.99967 4.07047V4.87484C6.99967 5.16952 7.11673 5.45214 7.3251 5.66051C7.53347 5.86888 7.81608 5.98594 8.11076 5.98594C8.40544 5.98594 8.68805 5.86888 8.89642 5.66051C9.10479 5.45214 9.22186 5.16952 9.22186 4.87484V4.07047H17.1356V4.87484C17.1356 5.02049 17.1643 5.16471 17.22 5.29926C17.2758 5.43382 17.3575 5.55608 17.4604 5.65907C17.5634 5.76206 17.6857 5.84375 17.8202 5.89948C17.9548 5.95522 18.099 5.98391 18.2447 5.98391C18.3903 5.98391 18.5345 5.95522 18.6691 5.89948C18.8036 5.84375 18.9259 5.76206 19.0289 5.65907C19.1319 5.55608 19.2136 5.43382 19.2693 5.29926C19.325 5.16471 19.3537 5.02049 19.3537 4.87484V4.07047H23.2716C23.2733 4.0713 23.2747 4.0725 23.2758 4.07398C23.277 4.07546 23.2777 4.07718 23.2781 4.079V6.69566H3.04157V4.07087L6.99967 4.07047ZM3.03467 22.6523L3.04117 7.50775H23.2781L23.274 22.6564L3.03467 22.6523Z"
            fill="black"
          />
        </svg>
      </label>
      <input
        type="date"
        id="date-input"
        value={selectedDate}
        disabled={!isConditionActive}
        onChange={handleDateChange}
      />
    </div>
  );
}
export default DateType;
